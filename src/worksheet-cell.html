<fw-celllist>
    <fw-cell each={ item, idx in list } tagType={ item.displayComponent } cell={ item.cell }></fw-cell>
    this.list = opts.list;
</fw-celllist>

<fw-cell>
    <div name={ cell.name } style="border: solid thin black;">

        <label>Name: </label>
        <fw-name cell={ cell }></fw-name>
        <br />

        <label>f(x): </label>
        <fw-formula cell={ cell }></fw-formula>
        <br />

        <button onclick={ reset }>Reset Acc</button>
        <br />

        <label>Upstreams: </label>
        <div each={ upstream in upstreams } >{ upstream }</div>
        <br />

        <label>Output: </label>
        <fw-poly tagType={ opts.tagtype} parentTag={ this } data={ displayOpts } ></fw-poly>

    </div>

    <script>
        var self = this;
        self.cell = opts.cell || (new Cell());

        self.displayComponent = opts.tagType;

        self.displayOpts = {
            data: {
                output: self.cell.output
            },
            parentElementSelector: '[name="' + self.cell.name + '"]',
            parentTag: self,
            cell: self.cell //shouldn't be needed by most display types
        };

        self.reset = function(){
            self.cell.resetAcc();
        };

        self.reup = function(){
            self.upstreams = R.keys(self.cell.upstreams);
            self.output = self.cell.output;
            self.displayOpts.data.output = self.cell.output;
            self.update();
        };

        self.cell.subscribe(self.reup);

        self.reup();

    </script>
</fw-cell>
