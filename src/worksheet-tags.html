<fw-ajax>

    <div style="border: solid thin black;">

        <label>Cell Name: </label>
        <fw-name cell={ cell }></fw-name>
        <br />

        <label>Url: </label>
        <input autofocus autocomplete="on" placeholder="GET://" value={ url } onkeyup={ callUrl } >
        <br />

        <label>Output: </label>
        <div>{ display }</div>
        <br />

    </div>

    <script>
        var self = this;
        self.cell = opts.cell || (new Cell());
        self.url = '';
        self.display = '';

        self.callUrl = function changeFormula(e) {
            if (e.which == 13) {
                var value = e.target.value && e.target.value.trim();
                if (!value) {
                    self.cell.update('undefined');
                    return;
                }

                //GET the stuff...set the formula
                //self.cell.update(value);

                fetch(value)//'/users.json')
                .then(function(response) {
                    return response.text();
                }).then(function(body){
                    debugger;

                    self.cell.update(body);
                    self.display = body;
                    self.update();

                }).catch(function(ex) {
                    console.log('parsing failed', ex)
                });
            }
        };

    </script>
</fw-ajax>
